<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>J.A.R.V.I.S. Webkonsole</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="ui-backdrop" aria-hidden="true">
        <div class="ui-backdrop__gradient ui-backdrop__gradient--one"></div>
        <div class="ui-backdrop__gradient ui-backdrop__gradient--two"></div>
        <div class="ui-backdrop__grid"></div>
    </div>
    <div id="app">
        <header class="app-header">
            <div>
                <h1>J.A.R.V.I.S.</h1>
                <p class="subtitle">Web Control Center</p>
            </div>
            <div class="header-controls">
                <label class="token-field">
                    <span>Token</span>
                    <div class="token-input-group">
                        <input type="password" id="auth-token" placeholder="optional" autocomplete="off">
                        <button type="button" id="auth-token-toggle" aria-label="Token anzeigen" title="Token anzeigen">Anzeigen</button>
                    </div>
                    <small class="token-hint hidden" id="auth-token-error"></small>
                </label>
                <div class="connection-indicator" id="ws-indicator">
                    <span class="dot"></span>
                    <span class="label">Offline</span>
                </div>
            </div>
        </header>

        <nav class="tab-nav" role="tablist" aria-label="J.A.R.V.I.S. Bereiche">
            <button type="button" id="tab-chat" data-tab="chat" class="active" role="tab" aria-selected="true" aria-controls="panel-chat" tabindex="0">Chat</button>
            <button type="button" id="tab-assistant" data-tab="assistant" role="tab" aria-selected="false" aria-controls="panel-assistant" tabindex="-1">Assistenz</button>
            <button type="button" id="tab-system" data-tab="system" role="tab" aria-selected="false" aria-controls="panel-system" tabindex="-1">System</button>
            <button type="button" id="tab-models" data-tab="models" role="tab" aria-selected="false" aria-controls="panel-models" tabindex="-1">Modelle</button>
            <button type="button" id="tab-plugins" data-tab="plugins" role="tab" aria-selected="false" aria-controls="panel-plugins" tabindex="-1">Plugins</button>
            <button type="button" id="tab-crawler" data-tab="crawler" role="tab" aria-selected="false" aria-controls="panel-crawler" tabindex="-1">Crawler</button>
            <button type="button" id="tab-memory" data-tab="memory" role="tab" aria-selected="false" aria-controls="panel-memory" tabindex="-1">Gedaechtnis</button>
            <button type="button" id="tab-training" data-tab="training" role="tab" aria-selected="false" aria-controls="panel-training" tabindex="-1">Training</button>
            <button type="button" id="tab-logs" data-tab="logs" role="tab" aria-selected="false" aria-controls="panel-logs" tabindex="-1">Logs</button>
            <button type="button" id="tab-settings" data-tab="settings" role="tab" aria-selected="false" aria-controls="panel-settings" tabindex="-1">Einstellungen</button>
        </nav>

        <main class="tab-container">
            <section class="tab-panel active" data-panel="chat" id="panel-chat" role="tabpanel" aria-labelledby="tab-chat" tabindex="0">
                <div class="split">
                    <div class="chat-panel">
                        <header>
                            <h2>Gespraech</h2>
                            <span id="assistant-status" class="badge">Initialisiere...</span>
                        </header>
                        <div id="chat-log" class="chat-log" role="log" aria-live="polite" aria-relevant="additions"></div>
                        <form id="command-form" class="command-form">
                            <label class="sr-only" for="command-input">Chat-Eingabe</label>
                            <textarea id="command-input" rows="2" placeholder="Schreibe einen Befehl oder eine Frage..."></textarea>
                            <div class="form-actions">
                                <button type="submit" id="send-button">Senden</button>
                                <span id="command-hint">SHIFT+ENTER fuer Zeilenumbruch</span>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <section class="tab-panel" data-panel="assistant" id="panel-assistant" role="tabpanel" aria-labelledby="tab-assistant" tabindex="0" hidden>
                <aside class="context-panel">
                    <article class="info-block">
                        <header><h3>Kontext</h3></header>
                        <dl id="context-list"></dl>
                    </article>
                    <article class="info-block">
                        <header><h3>Plugin-/Memory</h3></header>
                        <pre id="plugin-context" class="code-block small"></pre>
                    </article>
                    <article class="info-block">
                        <header><h3>Verlauf</h3></header>
                        <ul id="command-history" class="history-list"></ul>
                    </article>
                    <article class="info-block">
                        <header>
                            <h3>Sprachsteuerung</h3>
                            <span id="speech-control-status" class="badge">--</span>
                        </header>
                        <div class="control-group">
                            <button type="button" id="speech-toggle-btn">Hoeren starten</button>
                            <label class="toggle">
                                <input type="checkbox" id="wake-word-toggle">
                                Wake Word aktiv
                            </label>
                            <label class="toggle">
                                <input type="checkbox" id="tts-stream-toggle">
                                TTS Ausgabe aktiv
                            </label>
                        </div>
                        <p id="speech-mode-label" class="hint"></p>
                    </article>
                    <article class="info-block">
                        <header>
                            <h3>Wissensfortschritt</h3>
                        </header>
                        <ul id="knowledge-feed" class="knowledge-feed"></ul>
                    </article>
                </aside>
            </section>

            <section class="tab-panel" data-panel="crawler" id="panel-crawler" role="tabpanel" aria-labelledby="tab-crawler" tabindex="0" hidden>
                <div class="crawler-cards">
                    <article class="crawler-card summary-card">
                        <header>
                            <div>
                                <h2>Crawler</h2>
                                <p>Status, Steuerung und Synchronisation auf einen Blick.</p>
                            </div>
                            <div class="summary-actions">
                                <button type="button" id="crawler-refresh" class="ghost">Aktualisieren</button>
                                <button type="button" id="crawler-sync-now">Jetzt synchronisieren</button>
                            </div>
                        </header>
                        <div class="crawler-summary-grid">
                            <div class="summary-item">
                                <span>Status</span>
                                <strong id="crawler-connection-label">–</strong>
                                <small id="crawler-worker-count">Worker: –</small>
                            </div>
                            <div class="summary-item">
                                <span>Gefundene Dokumente</span>
                                <strong id="crawler-doc-total">–</strong>
                                <small id="crawler-doc-24h">24h: –</small>
                            </div>
                            <div class="summary-item">
                                <span>Seit letztem Sync</span>
                                <strong id="crawler-doc-since">–</strong>
                                <small id="crawler-last-sync">–</small>
                            </div>
                            <div class="summary-item">
                                <span>Jobs</span>
                                <strong id="crawler-running-count">–</strong>
                                <small id="crawler-open-jobs">Offen: –</small>
                            </div>
                            <div class="summary-item">
                                <span>CPU-Auslastung</span>
                                <strong id="crawler-cpu-usage">–</strong>
                                <small id="crawler-status-note">–</small>
                            </div>
                            <div class="summary-item switch">
                                <label for="crawler-auto-sync">Auto-Sync</label>
                                <input type="checkbox" id="crawler-auto-sync">
                            </div>
                        </div>
                        <div class="summary-footer">
                            <span>Letzte Synchronisation: <strong id="crawler-sync-summary">–</strong></span>
                            <span>Gesamt importiert: <strong id="crawler-sync-total">–</strong></span>
                        </div>
                    </article>

                    <article class="crawler-card start-card">
                        <header>
                            <h3>Neuen Crawl starten</h3>
                            <small id="crawler-job-feedback" class="muted"></small>
                        </header>
                        <form id="crawler-job-form" class="crawler-launch">
                            <label class="field">
                                <span>Thema / Topic</span>
                                <input type="text" id="crawler-job-topic" name="topic" placeholder="z. B. UE5 Niagara" required>
                            </label>
                            <label class="field">
                                <span>Start-URLs</span>
                                <textarea id="crawler-job-urls" name="start_urls" rows="2" placeholder="https://..." required></textarea>
                            </label>
                            <label class="field small">
                                <span>Max. Seiten</span>
                                <input type="number" id="crawler-job-pages" name="max_pages" min="1" max="1000" value="200">
                            </label>
                            <label class="field small">
                                <span>Tiefe</span>
                                <input type="number" id="crawler-job-depth" name="max_depth" min="0" max="5" value="2">
                            </label>
                            <label class="field small">
                                <span>Profil</span>
                                <select id="crawler-job-profile" name="profile">
                                    <option value="standard">Standard</option>
                                    <option value="aggressive">Aggressiv</option>
                                    <option value="slow">Langsam &amp; Rücksichtsvoll</option>
                                    <option value="whitelist">Nur Whitelist-Domains</option>
                                </select>
                            </label>
                            <div class="launch-actions">
                                <button type="submit">Crawl starten</button>
                            </div>
                        </form>
                    </article>
                </div>

                <div class="crawler-grid">
                    <article class="crawler-card">
                        <header>
                            <h3>Laufende Jobs</h3>
                            <div class="inline-actions">
                                <button type="button" id="crawler-control-pause" class="ghost">Pause</button>
                                <button type="button" id="crawler-control-resume">Resume</button>
                            </div>
                        </header>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Topic</th>
                                        <th>Status</th>
                                        <th>Fortschritt</th>
                                        <th>Seiten</th>
                                        <th>Tiefe</th>
                                        <th>Start</th>
                                        <th>Aktion</th>
                                    </tr>
                                </thead>
                                <tbody id="crawler-running-table">
                                    <tr><td colspan="7" class="muted">Keine laufenden Jobs</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </article>

                    <article class="crawler-card">
                        <header>
                            <h3>Abgeschlossene Jobs</h3>
                        </header>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Topic</th>
                                        <th>Seiten</th>
                                        <th>Max</th>
                                        <th>Status</th>
                                        <th>Erstellt</th>
                                        <th>Details</th>
                                    </tr>
                                </thead>
                                <tbody id="crawler-completed-table">
                                    <tr><td colspan="6" class="muted">Keine abgeschlossenen Jobs</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </article>

                    <article class="crawler-card">
                        <header>
                            <h3>Wissenssynchronisation</h3>
                        </header>
                        <div class="sync-stats">
                            <div>
                                <span>Letzte Synchronisation</span>
                                <strong id="crawler-sync-summary-card">–</strong>
                            </div>
                            <div>
                                <span>Dokumente seit letztem Sync</span>
                                <strong id="crawler-sync-docs">–</strong>
                            </div>
                            <div>
                                <span>Gesamt importiert</span>
                                <strong id="crawler-sync-total-card">–</strong>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" id="crawler-sync-btn">Jetzt synchronisieren</button>
                            <button type="button" id="crawler-recent-docs" class="ghost">Nur neue Dokumente</button>
                        </div>
                        <ul id="crawler-documents-list" class="document-list">
                            <li class="muted">Keine Daten</li>
                        </ul>
                    </article>

                    <article class="crawler-card">
                        <header>
                            <h3>Crawler-Konfiguration</h3>
                        </header>
                        <form id="crawler-config-form" class="crawler-config-form">
                            <div class="config-grid">
                                <label class="span-2">
                                    <span>Allowed Domains</span>
                                    <textarea id="crawler-domains" rows="3"></textarea>
                                </label>
                                <label>
                                    <span>Rate-Limit / Minute</span>
                                    <input type="number" id="crawler-rate-limit" min="1" max="200">
                                </label>
                                <label class="checkbox inline">
                                    <input type="checkbox" id="crawler-robots">
                                    <span>Robots.txt respektieren</span>
                                </label>
                                <label>
                                    <span>Max. Worker</span>
                                    <input type="number" id="crawler-max-workers" min="1" max="8">
                                </label>
                                <label>
                                    <span>Max. CPU %</span>
                                    <input type="number" id="crawler-max-cpu" min="5" max="100">
                                </label>
                                <label>
                                    <span>Max. RAM (MB)</span>
                                    <input type="number" id="crawler-max-ram" min="128" max="8192">
                                </label>
                                <label>
                                    <span>Max. Seiten pro Job</span>
                                    <input type="number" id="crawler-max-pages" min="10" max="2000">
                                </label>
                                <label>
                                    <span>Max. Tiefe</span>
                                    <input type="number" id="crawler-max-depth" min="0" max="5">
                                </label>
                                <label class="span-2">
                                    <span>Base URL</span>
                                    <input type="text" id="crawler-base-url">
                                </label>
                                <label>
                                    <span>API-Key</span>
                                    <input type="text" id="crawler-api-key">
                                </label>
                                <label>
                                    <span>Sync-Intervall (Sek.)</span>
                                    <input type="number" id="crawler-sync-interval" min="60" max="86400">
                                </label>
                            </div>
                            <div class="form-actions">
                                <button type="submit" id="crawler-save-config">Konfiguration speichern</button>
                                <button type="button" id="crawler-restart-btn" class="ghost">Crawler neu starten</button>
                            </div>
                        </form>
                    </article>

                    <article class="crawler-card">
                        <header>
                            <h3>Security &amp; Safe-Mode</h3>
                        </header>
                        <dl class="security-list">
                            <div>
                                <dt>Rolle</dt>
                                <dd id="crawler-security-role">–</dd>
                            </div>
                            <div>
                                <dt>API-Key registriert</dt>
                                <dd id="crawler-security-key">–</dd>
                            </div>
                            <div>
                                <dt>Domain-Whitelist</dt>
                                <dd id="crawler-security-domain">–</dd>
                            </div>
                            <div>
                                <dt>Safe-Mode</dt>
                                <dd id="crawler-security-safe">–</dd>
                            </div>
                        </dl>
                        <div class="form-actions">
                            <button type="button" id="crawler-safe-allow">Whitelist erlauben</button>
                            <button type="button" id="crawler-safe-block" class="ghost">Crawler blockieren</button>
                        </div>
                    </article>

                    <article class="crawler-card">
                        <header>
                            <h3>Benachrichtigungen</h3>
                        </header>
                        <ul id="crawler-alerts" class="crawler-alerts">
                            <li class="muted">Noch keine Ereignisse</li>
                        </ul>
                    </article>
                </div>
            </section>

            <section class="tab-panel" data-panel="system" id="panel-system" role="tabpanel" aria-labelledby="tab-system" tabindex="0" hidden>
                <div class="cards" id="system-cards">
                    <div class="card">
                        <span class="label">CPU</span>
                        <strong id="cpu-usage">--%</strong>
                        <small id="cpu-freq"></small>
                    </div>
                    <div class="card">
                        <span class="label">RAM</span>
                        <strong id="ram-usage">--%</strong>
                        <small id="ram-free"></small>
                    </div>
                    <div class="card">
                        <span class="label">GPU</span>
                        <strong id="gpu-load">--%</strong>
                        <small id="gpu-mem"></small>
                    </div>
                    <div class="card">
                        <span class="label">Uptime</span>
                        <strong id="uptime-value">--</strong>
                        <small id="uptime-boot"></small>
                    </div>
                </div>
                <div class="system-grid">
                    <article class="info-block">
                        <header><h3>Wissensdatenbank</h3></header>
                        <dl id="knowledge-stats" class="key-value-list"></dl>
                    </article>
                    <article class="info-block">
                        <header>
                            <h3>Netzwerk</h3>
                            <button type="button" id="speedtest-btn">Speedtest</button>
                        </header>
                        <table id="network-table">
                            <thead>
                                <tr><th>Interface</th><th>IPv4</th><th>Speed</th><th>Status</th></tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </article>
                    <article class="info-block">
                        <header><h3>Laufwerke</h3></header>
                        <table id="disk-table">
                            <thead>
                                <tr><th>Laufwerk</th><th>Belegt</th><th>Frei</th><th>%</th></tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </article>
                    <article class="info-block">
                        <header><h3>Systeminfo</h3></header>
                        <pre id="system-info" class="code-block"></pre>
                    </article>
                </div>
            </section>

            <section class="tab-panel" data-panel="models" id="panel-models" role="tabpanel" aria-labelledby="tab-models" tabindex="0" hidden>
                <div class="model-layout">
                    <div class="model-list">
                        <header><h3>Verfuegbare Modelle</h3></header>
                        <ul id="model-overview"></ul>
                    </div>
                    <div class="model-details">
                        <header>
                            <h3>Aktionen</h3>
                            <span id="current-model-label" class="badge">Kein Modell</span>
                        </header>
                        <div class="model-actions">
                            <button type="button" data-action="load">Laden</button>
                            <button type="button" data-action="unload">Entladen</button>
                            <button type="button" data-action="download">Herunterladen</button>
                        </div>
                        <pre id="model-metadata" class="code-block"></pre>
                        <div id="model-download-progress" class="model-progress-box hidden">
                            <div class="model-progress-track">
                                <div class="model-progress-track-bar"></div>
                            </div>
                            <span id="model-download-progress-label" class="model-progress-text">0%</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="tab-panel" data-panel="plugins" id="panel-plugins" role="tabpanel" aria-labelledby="tab-plugins" tabindex="0" hidden>
                <div class="plugins-grid">
                    <article class="info-block">
                        <header>
                            <h3>Plugin-Uebersicht</h3>
                            <button type="button" id="refresh-plugins">Aktualisieren</button>
                        </header>
                        <table class="data-table" id="plugin-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Modul</th>
                                    <th>Status</th>
                                    <th>Sandbox</th>
                                    <th>Aktionen</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </article>
                    <article class="info-block">
                        <header><h3>Details</h3></header>
                        <pre id="plugin-details" class="code-block small"></pre>
                    </article>
                </div>
            </section>

            <section class="tab-panel" data-panel="memory" id="panel-memory" role="tabpanel" aria-labelledby="tab-memory" tabindex="0" hidden>
                <div class="memory-grid">
                    <article class="info-block">
                        <header><h3>Aktueller Kontext</h3></header>
                        <p id="memory-summary" class="memory-summary">Keine Daten verfuegbar.</p>
                        <div class="topics">
                            <h4>Aktive Themen</h4>
                            <ul id="memory-topics" class="pill-list"></ul>
                        </div>
                        <pre id="memory-context" class="code-block small"></pre>
                    </article>
                    <article class="info-block">
                        <header>
                            <h3>Konversationsverlauf</h3>
                            <form id="memory-search" class="inline-form">
                                <input type="search" id="memory-query" placeholder="Semantische Suche..." />
                                <button type="submit">Suche</button>
                            </form>
                        </header>
                        <ul id="memory-messages" class="list"></ul>
                    </article>
                    <article class="info-block">
                        <header><h3>Zeitleiste</h3></header>
                        <ul id="memory-timeline" class="list"></ul>
                    </article>
                    <article class="info-block">
                        <header><h3>Suchergebnisse</h3></header>
                        <ul id="memory-search-results" class="list"></ul>
                    </article>
                </div>
            </section>

            <section class="tab-panel" data-panel="training" id="panel-training" role="tabpanel" aria-labelledby="tab-training" tabindex="0" hidden>
                <div class="training-grid">
                    <article class="info-block">
                        <header><h3>Benutzerdefinierte Befehle</h3></header>
                        <form id="custom-command-form" class="command-form vertical">
                            <label>Muster
                                <input type="text" id="custom-command-pattern" required placeholder="z. B. 'wie spät ist es'">
                            </label>
                            <label>Antwort
                                <textarea id="custom-command-response" rows="3" required></textarea>
                            </label>
                            <div class="form-actions">
                                <button type="submit">Befehl speichern</button>
                            </div>
                        </form>
                        <table id="commands-table">
                            <thead>
                                <tr><th>Kategorie</th><th>Muster</th><th>Antwort</th></tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </article>
                    <article class="info-block">
                        <header>
                            <h3>Training</h3>
                            <button type="button" id="run-training">Training starten</button>
                        </header>
                        <pre id="training-log" class="code-block"></pre>
                    </article>
                    <article class="info-block">
                        <header><h3>Top-Kommandos</h3></header>
                        <ul id="top-commands"></ul>
                    </article>
                    <article class="info-block">
                        <header><h3>Reinforcement</h3></header>
                        <pre id="reinforcement-info" class="code-block small"></pre>
                    </article>
                </div>
            </section>

            <section class="tab-panel" data-panel="logs" id="panel-logs" role="tabpanel" aria-labelledby="tab-logs" tabindex="0" hidden>
                <div class="log-controls">
                    <input type="search" id="log-search" placeholder="Filter...">
                    <input type="number" id="log-lines" min="10" max="1000" value="200">
                    <button id="refresh-logs" type="button">Aktualisieren</button>
                    <button id="clear-logs" type="button">Logs loeschen</button>
                </div>
                <pre id="log-output" class="code-block log-block"></pre>
            </section>

            <section class="tab-panel" data-panel="settings" id="panel-settings" role="tabpanel" aria-labelledby="tab-settings" tabindex="0" hidden>
                <div class="settings-grid">
                    <form id="speech-form" class="settings-card">
                        <h3>Sprach-Einstellungen</h3>
                        <label>Wake Word aktiv
                            <input type="checkbox" name="wake_word_enabled">
                        </label>
                        <label>Min. Befehlswoerter
                            <input type="number" name="min_command_words" min="1" max="10">
                        </label>
                        <label>TTS-Geschwindigkeit
                            <input type="number" name="tts_rate" min="120" max="260" step="5">
                        </label>
                        <button type="submit">Speichern</button>
                    </form>

                    <form id="audio-form" class="settings-card">
                        <h3>Audio</h3>
                        <label>Eingabegeraet
                            <select id="audio-device-select"></select>
                        </label>
                        <div class="form-actions">
                            <button type="button" id="refresh-audio-devices">Aktualisieren</button>
                            <button type="button" id="measure-audio">Pegel messen</button>
                        </div>
                        <p id="audio-level-label">Pegel: --</p>
                        <button type="submit">Geraet speichern</button>
                    </form>

                    <form id="web-form" class="settings-card">
                        <h3>Web-Interface</h3>
                        <label>Port
                            <input type="number" name="port" min="1" max="65535">
                        </label>
                        <label>Host
                            <input type="text" name="host">
                        </label>
                        <label>Token
                            <input type="text" name="token">
                        </label>
                        <button type="submit">Web-Settings speichern</button>
                    </form>

                    <form id="system-form" class="settings-card">
                        <h3>System</h3>
                        <label>
                            <input type="checkbox" name="debug_mode">
                            Debug-Modus aktivieren
                        </label>
                        <label>
                            <input type="checkbox" name="auto_start">
                            Autostart aktivieren
                        </label>
                        <button type="submit">System-Settings speichern</button>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <div id="busy-overlay" class="busy-overlay hidden" aria-live="polite" aria-label="Bitte warten">
        <div class="spinner"></div>
        <span>Bitte warten...</span>
    </div>

    <div id="toast-container" class="toast-container" role="status" aria-live="polite" aria-atomic="true"></div>

    <div id="security-overlay" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="security-message">
        <div class="overlay-content">
            <h3>Sicherheitsfreigabe benoetigt</h3>
            <p id="security-message">Bitte gib die Passphrase ein, um fortzufahren.</p>
            <form id="security-form">
                <label class="sr-only" for="security-input">Passphrase</label>
                <input type="text" id="security-input" placeholder="Passphrase" autocomplete="off">
                <div class="form-actions">
                    <button type="submit">Bestaetigen</button>
                    <button type="button" id="security-cancel">Abbrechen</button>
                </div>
            </form>
        </div>
    </div>

    <template id="message-template">
        <div class="chat-message">
            <div class="meta">
                <div class="meta-left">
                    <span class="role"></span>
                    <span class="time"></span>
                </div>
                <div class="meta-actions">
                    <button type="button" class="copy-btn hidden" title="Antwort kopieren">Kopieren</button>
                </div>
            </div>
            <div class="text"></div>
        </div>
    </template>

    <div id="authenticator-modal" class="modal">
        <div class="modal-background"></div>
        <div class="modal-card">
            <header class="modal-card-head">
                <p class="modal-card-title">Authenticator einrichten</p>
                <button class="delete" id="authenticator-close" aria-label="close"></button>
            </header>
            <section class="modal-card-body">
                <p id="authenticator-token-warning" class="notification is-warning is-hidden">
                    Bitte gib zunächst oben den Web-Token ein, bevor du den Authenticator einrichtest.
                </p>
                <p id="authenticator-info" class="qr-info">Scanne diesen QR-Code mit deiner Authenticator-App (z. B. Google Authenticator).</p>
                <div class="qr-container">
                    <div id="authenticator-qr"></div>
                </div>
                <div class="secret-container">
                    <span>Oder nutze diesen Schlüssel:</span>
                    <strong id="authenticator-secret">---</strong>
                    <button type="button" class="icon-btn" id="authenticator-copy" title="Schlüssel kopieren">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                        </svg>
                    </button>
                </div>
                <p class="has-text-centered">
                    Provisioning-URL:
                    <a id="authenticator-uri" href="#" target="_blank" rel="noreferrer">App öffnen</a>
                </p>
                <div class="field">
                    <label class="label">Aktueller Code</label>
                    <div class="control">
                        <input id="authenticator-code" class="input" type="text" placeholder="123456" maxlength="6" pattern="[0-9]*" inputmode="numeric" autocomplete="one-time-code" spellcheck="false">
                    </div>
                    <p class="help">Gib den aktuellen 6-stelligen Code aus deiner Authenticator-App ein.</p>
                </div>
                <div id="authenticator-loading" class="notification is-info is-hidden">
                    Bestätigung läuft ...
                </div>
                <div id="authenticator-error" class="notification is-danger is-hidden"></div>
                <div id="authenticator-success" class="notification is-success is-hidden">
                    Erfolgreich! Die Zwei-Faktor-Authentifizierung wurde aktiviert.
                </div>
            </section>
            <footer class="modal-card-foot">
                <button id="authenticator-confirm" class="button is-primary">Bestätigen</button>
                <button class="button" id="authenticator-cancel">Später</button>
            </footer>
        </div>
    </div>

    <script src="/static/js/vendor/qrcode.min.js"></script>
    <script src="/static/js/security.js"></script>
    <script src="/static/app.js" type="module"></script>
</body>
</html>
